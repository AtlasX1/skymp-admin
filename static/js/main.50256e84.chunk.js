(window.webpackJsonplauncher=window.webpackJsonplauncher||[]).push([[0],{10:function(e,t,n){e.exports={radioButton:"style_radioButton__2Fc5S",radioButton_circle:"style_radioButton_circle__dIDSy",radioButton_circle_checked:"style_radioButton_circle_checked__stn5-"}},11:function(e,t,n){e.exports={loginContent:"style_loginContent__3QkuD",loginContent_servers:"style_loginContent_servers__StBcc",loginContent_form:"style_loginContent_form__uxtyC"}},13:function(e,t,n){e.exports={button:"style_button__1HQff",button_white:"style_button_white__3xCVX"}},14:function(e,t,n){e.exports={main:"style_main__2rq8m",buttons:"style_buttons__20n9r"}},15:function(e,t,n){e.exports={registrationContent:"style_registrationContent__1xvuW",registrationContent_form:"style_registrationContent_form__1UKkS"}},32:function(e,t,n){e.exports={input:"style_input__178bl"}},33:function(e,t,n){e.exports={app:"style_app__2q9UC"}},38:function(e,t,n){e.exports=n(70)},68:function(e,t,n){},7:function(e,t,n){e.exports={table:"style_table__2TLCE",table_row:"style_table_row__3XQ9g",table_row_ip:"style_table_row_ip__vO0EC",table_row_name:"style_table_row_name__3V0z7",selected:"style_selected__1avxB"}},70:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(5),o=n.n(c),i=n(28),l=n(29),s=n(34),u=n(30),m=n(35),p=n(3),d=n.n(p),_=n(36),f=n(1),v=n(31),h=n(6),g=n(8),b=n.n(g),E={set:function(e,t){return localStorage.setItem(t,JSON.stringify(e))},get:function(e){return JSON.parse(localStorage.getItem(e))}},y={login:function(e,t){var n;return d.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return n=E.get("authUrl"),a.next=3,d.a.awrap(b.a.post("".concat(n,"users/login"),{email:e,password:t}).then((function(e){return e.data})).catch((function(e){return alert(e)})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))},registration:function(e,t,n){var a;return d.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return a=E.get("authUrl"),r.next=3,d.a.awrap(b.a.post("".concat(a,"users"),{email:e,password:t,name:n}).then((function(e){return alert("Ok!")})).catch((function(e){var t,n;return alert(null!==(t=null===e||void 0===e?void 0:null===(n=e.response)||void 0===n?void 0:n.data)&&void 0!==t?t:"Something wrong.")})));case 3:return r.abrupt("return",r.sent);case 4:case"end":return r.stop()}}))},getSession:function(e,t,n){var a;return d.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return a=E.get("authUrl"),r.next=3,d.a.awrap(b.a.post("".concat(a,"users/").concat(e,"/play/").concat(t),{},{headers:{Authorization:n}}).then((function(e){return e.data})).catch((function(e){return console.log(e)})));case 3:return r.abrupt("return",r.sent);case 4:case"end":return r.stop()}}))}},w={getServers:function(e,t){var n;return d.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return n=E.get("authUrl"),a.next=3,d.a.awrap(b.a.get("".concat(n,"servers"),{email:e,password:t}).then((function(e){return e.data})).catch((function(e){return console.log(e)})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}))}},C=n(9),O=n.n(C),S=function(e){var t=e.closeApp,n=e.hideApp,a=(e.showPanel,e.user),c=e.logout;return r.a.createElement("div",{className:O.a.header},r.a.createElement("div",{className:"no-drag ".concat(O.a.header_close),onClick:function(){return t()}}),r.a.createElement("div",{className:"no-drag ".concat(O.a.header_hide),onClick:function(){return n()}}),r.a.createElement("div",{onClick:function(){return c()},className:"no-drag",style:{color:"white",marginRight:"40px",userSelect:"none",cursor:"pointer"}},"\u0412\u044b\u0439\u0442\u0438"),r.a.createElement("div",{style:{color:"white",marginRight:"30px"}},null===a||void 0===a?void 0:a.name))},j=n(32),k=n.n(j),x=function(e){var t=e.placeholder,n=void 0===t?"placeholder":t,a=e.value,c=e.setValue,o=e.isLabel,i=void 0!==o&&o;return r.a.createElement(r.a.Fragment,null,i&&r.a.createElement("div",{style:{color:"white"}},n),r.a.createElement("input",{value:a,onChange:function(e){return c(e.target.value)},className:k.a.input,placeholder:n}))},N=n(7),B=n.n(N),U=function(e){var t=e.ip,n=e.maxPlayers,a=e.name,c=e.online,o=e.port,i=e.isSelected,l=void 0!==i&&i,s=e.chooseServer,u=e.header;return r.a.createElement("div",{className:"".concat(B.a.table_row," ").concat(l?B.a.selected:""),onClick:function(){return!u&&s()}},r.a.createElement("div",{className:B.a.table_row_ip},t,":",o),r.a.createElement("div",{className:B.a.table_row_name},a),r.a.createElement("div",{className:B.a.table_row_online},c,n?"/":"",n))},L=function(e){var t=e.servers,n=void 0===t?[]:t,a=e.chosenServer,c=e.chooseServer;return r.a.createElement("div",{className:B.a.table},r.a.createElement(U,{name:"\u0418\u043c\u044f",ip:"ip",online:"\u041e\u043d\u043b\u0430\u0439\u043d",header:!0}),n.map((function(e,t){return r.a.createElement(U,Object.assign({key:t},e,{isSelected:a["server-ip"]===e.ip,chooseServer:function(){return c(e)}}))})))},P=n(13),V=n.n(P),q=function(e){var t=e.name,n=e.type,a=void 0===n?"white":n,c=e.onClick;return r.a.createElement("div",{className:"".concat(V.a["button_".concat(a)]," ").concat(V.a.button),onClick:function(){return c()}},t)},J=n(10),A=n.n(J),D=function(e){var t=e.isChecked,n=void 0!==t&&t,a=e.onClick,c=e.text,o=void 0===c?"":c;return r.a.createElement("div",{className:A.a.radioButton,onClick:function(){return!n&&a()}},r.a.createElement("div",{className:A.a.radioButton_circle},n&&r.a.createElement("div",{className:A.a.radioButton_circle_checked})),r.a.createElement("div",null,o))},I=n(14),M=n.n(I),F=window.require("fs"),R=window.require("electron").remote.shell,Q=function(e){var t;Object(v.a)(e);var n=Object(a.useState)([]),c=Object(f.a)(n,2),o=c[0],i=c[1],l=Object(a.useState)({}),s=Object(f.a)(l,2),u=s[0],m=s[1],p=Object(a.useState)({"server-ip":"","server-port":0,"show-me":!1,"enable-console":!1,gameData:{session:""}}),g=Object(f.a)(p,2),b=g[0],C=g[1],O=Object(a.useState)(null!==(t=E.get("gamePath"))&&void 0!==t?t:""),S=Object(f.a)(O,2),j=S[0],k=S[1];Object(a.useEffect)((function(){E.set(j,"gamePath")}),[j]),Object(a.useEffect)((function(){w.getServers().then(i),m(E.get("connection"))}),[]);var N=function(){if(j){var e="".concat(j,"/Data/Platform/Plugins/skymp5-client-settings.txt");try{F.existsSync(e)?(F.unlinkSync(e),F.appendFile(e,JSON.stringify(b),(function(e){return console.log(e)}))):F.appendFile(e,JSON.stringify(b),(function(e){return console.log(e)})),b["server-ip"]||h.NotificationManager.warning("\u0412\u044b\u0431\u0435\u0440\u0438 \u0441\u0435\u0440\u0432\u0435\u0440."),(null===u||void 0===u?void 0:u.id)&&b["server-ip"]&&function(){try{j?R.openItem("".concat(j,"/skse64_loader.exe")):alert("gamePath ")}catch(e){alert(e)}}()}catch(t){alert(t)}}else h.NotificationManager.warning("\u041d\u0430\u0434\u043e \u043f\u0443\u0442\u044c \u0438\u0433\u0440\u044b")};return r.a.createElement("div",{className:M.a.main},r.a.createElement(L,{servers:o,chosenServer:b,chooseServer:function(e){return d.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:u&&y.getSession(u.id,"".concat(e.ip,":").concat(e.port),u.token).then((function(t){console.log(t),C((function(n){return Object(_.a)({},n,{"server-ip":e.ip,"server-port":e.port,gameData:{session:t.session}})}))}));case 1:case"end":return t.stop()}}))}}),r.a.createElement(x,{value:j,setValue:k,placeholder:"\u041f\u0443\u0442\u044c \u0438\u0433\u0440\u044b (//)"}),r.a.createElement("div",{className:M.a.buttons},r.a.createElement("div",null,r.a.createElement(q,{name:"\u0418\u0433\u0440\u0430\u0442\u044c",onClick:function(){N()}})),r.a.createElement("div",null,r.a.createElement(q,{name:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c",onClick:function(){w.getServers().then(i),h.NotificationManager.success("\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u043e")}}))),r.a.createElement(h.NotificationContainer,null))},z=n(11),T=n.n(z),X=["https://skymp-auth.herokuapp.com/api/","https://skymp.io/api/"],H=function(e){var t=e.setUser,n=e.setCurrentScreen,c=Object(a.useState)("testEmain@email.com"),o=Object(f.a)(c,2),i=o[0],l=o[1],s=Object(a.useState)("1q2w3e4r5t"),u=Object(f.a)(s,2),m=u[0],p=u[1],d=Object(a.useState)(null),_=Object(f.a)(d,2),v=_[0],g=_[1],b=Object(a.useState)(E.get("authUrl")?E.get("authUrl"):"https://skymp-auth.herokuapp.com/api/"),w=Object(f.a)(b,2),C=w[0],O=w[1];return Object(a.useEffect)((function(){var e=E.get("connection");e&&E.set(e,"connection"),v&&E.set(v,"connection"),E.set(C,"authUrl")}),[v]),r.a.createElement("div",{className:T.a.loginContent},r.a.createElement("div",{className:T.a.loginContent_servers},r.a.createElement("div",{style:{color:"white"}},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u0435\u0440\u0432\u0435\u0440 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438:"),X.map((function(e,t){return r.a.createElement(D,{key:t,isChecked:C===e,text:e,value:e,onClick:function(){return function(e){O(e),E.set(e,"authUrl")}(e)}})}))),r.a.createElement("div",{className:T.a.loginContent_form},r.a.createElement(x,{value:i,setValue:l,label:"Email",type:"text",placeholder:"\u041f\u043e\u0447\u0442\u0430",isLabel:!0}),r.a.createElement(x,{value:m,setValue:p,label:"Password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",isLabel:!0}),r.a.createElement(q,{name:"\u0412\u043e\u0439\u0442\u0438",onClick:function(){return y.login(i,m).then((function(e){g(e),t(e)}))}}),r.a.createElement(q,{name:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",onClick:function(){return n("Registration")}})),r.a.createElement(h.NotificationContainer,null))},K=n(15),W=n.n(K),Z=function(e){var t=e.setCurrentScreen,n=Object(a.useState)("testEmain@email.com"),c=Object(f.a)(n,2),o=c[0],i=c[1],l=Object(a.useState)("1q2w3e4r5t"),s=Object(f.a)(l,2),u=s[0],m=s[1],p=Object(a.useState)("TestName1233"),d=Object(f.a)(p,2),_=d[0],v=d[1];return r.a.createElement("div",{className:W.a.registrationContent},r.a.createElement("div",{className:W.a.registrationContent_form},r.a.createElement(x,{value:_,setValue:v,label:"Email",type:"text",placeholder:"\u0418\u043c\u044f",isLabel:!0}),r.a.createElement(x,{value:o,setValue:i,label:"Email",type:"text",placeholder:"\u041f\u043e\u0447\u0442\u0430",isLabel:!0}),r.a.createElement(x,{value:u,setValue:m,label:"Password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",isLabel:!0}),r.a.createElement(q,{name:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",onClick:function(){y.registration(o,u,_)}}),r.a.createElement(q,{name:"\u041d\u0430\u0437\u0430\u0434",onClick:function(){return t("Login")}})))},G=n(33),Y=n.n(G),$=window.require("electron").remote.app,ee=function(e){var t=Object(a.useState)("Login"),n=Object(f.a)(t,2),c=n[0],o=n[1],i=Object(a.useState)(null),l=Object(f.a)(i,2),s=l[0],u=l[1],m=Object(a.useCallback)((function(){return E.get("connection")}),[]);return Object(a.useEffect)((function(){var e=m();u(e),e&&o("Main")}),[]),r.a.createElement("div",{className:Y.a.app},r.a.createElement(S,{closeApp:function(){return $.exit()},hideApp:function(){},user:s,logout:function(){E.set(null,"connection"),u(null),o("Login")}}),!s&&"Login"===c&&r.a.createElement(H,{setCurrentScreen:o,setUser:u}),"Registration"===c&&r.a.createElement(Z,{setCurrentScreen:o}),!!s&&r.a.createElement(Q,{setCurrentScreen:o}))},te=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(ee,null)}}]),t}(a.Component);n(68),n(69);o.a.render(r.a.createElement(te,null),document.getElementById("root"))},9:function(e,t,n){e.exports={header:"style_header__OMpc0",header_close:"style_header_close__2r6CZ",header_hide:"style_header_hide__3xCu2"}}},[[38,1,2]]]);
//# sourceMappingURL=main.50256e84.chunk.js.map